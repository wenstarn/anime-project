{"ast":null,"code":"import axios from 'axios';\nexport default class AnimeService {\n  constructor() {\n    this._apiBase = 'https://shikimori.one/api';\n\n    this.getResource = async (url, config = {}) => {\n      return (await axios.get(`${this._apiBase}${url}`, {\n        params: config\n      })).data;\n    };\n\n    this.getOngoings = async num => {\n      const config = {\n        status: \"ongoing\",\n        order: \"ranked\",\n        limit: num\n      };\n      const res = await this.getResource('/animes/', config); //res = await Promise.all(res.map(this._transformAnime));\n\n      return res.map(this._transformAnime);\n    };\n\n    this.getRandomCharacters = async num => {\n      const idArray = [];\n      const characters = [];\n      let i = 0;\n\n      while (i < num) {\n        const id = Math.floor(Math.random() * 100000);\n        if (id in idArray) continue;else {\n          idArray.push(id);\n\n          try {\n            const res = await this.getResource(`/characters/${id}`);\n            characters.push(res);\n          } catch {\n            console.log(\"mistake\");\n            continue;\n          }\n\n          i = i + 1;\n        }\n      }\n\n      return characters.map(this._transformCharacter);\n    };\n\n    this.getAdditionalAnimes = async(page = 1, num = 30);\n\n    this.getAnime = async id => {\n      const res = await this.getResource(`/animes/${id}`);\n      return this._transformAnime(res);\n    };\n\n    this.searchAnimes = async (name, num = 10) => {\n      const config = {\n        order: \"ranked\",\n        limit: num,\n        search: name\n      };\n      const res = await this.getResource('/animes/', config);\n      return res.map(this._transformAnime);\n    };\n\n    this._transformAnime = anime => {\n      console.log(anime); //const { description } = await this.getResource(`/animes/${anime.id}`)\n\n      return { ...anime,\n        image: \"https://shikimori.one\" + anime.image.original,\n        imageForSearch: \"https://shikimori.one\" + anime.image.x48 //description\n\n      };\n    };\n\n    this._transformCharacter = character => {\n      return {\n        id: character.id,\n        russian: character.russian,\n        image: \"https://shikimori.one\" + character.image.original\n      };\n    };\n  }\n\n}","map":{"version":3,"sources":["/Users/aleksandrgolomazov/anime_project/src/services/anime-service.js"],"names":["axios","AnimeService","_apiBase","getResource","url","config","get","params","data","getOngoings","num","status","order","limit","res","map","_transformAnime","getRandomCharacters","idArray","characters","i","id","Math","floor","random","push","console","log","_transformCharacter","getAdditionalAnimes","async","page","getAnime","searchAnimes","name","search","anime","image","original","imageForSearch","x48","character","russian"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\nexport default class AnimeService {\n    _apiBase = 'https://shikimori.one/api';\n    getResource = async (url, config = {}) => {\n        return (await axios.get(`${this._apiBase}${url}`, { params: config })).data;\n    }\n\n    getOngoings = async (num) => {\n        const config = { status: \"ongoing\", order: \"ranked\", limit: num };\n        const res = await this.getResource('/animes/', config);\n        //res = await Promise.all(res.map(this._transformAnime));\n        return res.map(this._transformAnime);\n    }\n    //30735 creates the mistake \n    getRandomCharacters = async (num) => {\n        const idArray = [];\n        const characters = [];\n        let i = 0;\n        while (i < num) {\n            const id = Math.floor(Math.random() * 100000);\n            if (id in idArray) continue\n            else {\n                idArray.push(id)\n                try {\n                    const res = await this.getResource(`/characters/${id}`);\n                    characters.push(res);\n                }\n                catch {\n                    console.log(\"mistake\")\n                    continue\n                }\n                i = i + 1;\n            }\n        }\n        return characters.map(this._transformCharacter)\n    }\n\n    getAdditionalAnimes = async(page = 1, num = 30)\n\n    getAnime = async (id) => {\n        const res = await this.getResource(`/animes/${id}`);\n        return this._transformAnime(res);\n    }\n\n    searchAnimes = async (name, num = 10) => {\n        const config = { order: \"ranked\", limit: num, search: name };\n        const res = await this.getResource('/animes/', config);\n        return res.map(this._transformAnime);\n    }\n\n    _transformAnime = (anime) => {\n        console.log(anime)\n        //const { description } = await this.getResource(`/animes/${anime.id}`)\n        return {\n            ...anime,\n            image: \"https://shikimori.one\" + anime.image.original,\n            imageForSearch: \"https://shikimori.one\" + anime.image.x48\n            //description\n        }\n    }\n\n    _transformCharacter = (character) => {\n        return {\n            id: character.id,\n            russian: character.russian,\n            image: \"https://shikimori.one\" + character.image.original\n        }\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}